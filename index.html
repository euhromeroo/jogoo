<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Jogo da Forca com Dicas</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 2rem;
      background-color: #f0f0f0;
    }

    #addWordSection {
      margin-bottom: 2rem;
      padding: 1rem;
      background: #fff;
      border: 1px solid #ccc;
      display: inline-block;
      text-align: left;
    }

    #addWordSection input {
      padding: 0.4rem;
      margin-right: 0.5rem;
      margin-bottom: 0.5rem;
      font-size: 1rem;
    }

    #addWordSection button {
      padding: 0.4rem 0.8rem;
      font-size: 1rem;
      cursor: pointer;
    }

    #addStatus {
      margin-top: 0.5rem;
      color: green;
    }

    #hint {
      font-size: 1.2rem;
      margin-bottom: 1rem;
      color: #333;
    }

    #wordDisplay {
      font-size: 2rem;
      letter-spacing: 0.5rem;
      margin-bottom: 1.5rem;
    }

    #letters {
      margin-bottom: 1.5rem;
    }

    #letters button {
      width: 2rem;
      height: 2rem;
      margin: 0.2rem;
      font-size: 1rem;
      cursor: pointer;
    }

    #hangmanCanvas {
      background-color: #fff;
      border: 1px solid #ccc;
      margin: 1rem auto;
      display: block;
    }

    #status {
      font-size: 1.2rem;
      margin-top: 1rem;
    }

    #restartBtn {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      cursor: pointer;
      display: none;
    }
  </style>
</head>
<body>

  <h1>Jogo da Forca com Dicas</h1>

  <div id="addWordSection">
    <h2>Adicionar Nova Pergunta</h2>
    <input type="text" id="newWord" placeholder="Palavra (Aâ€“Z apenas)" maxlength="20">
    <input type="text" id="newHint" placeholder="Dica para a palavra">
    <button id="addWordBtn">Adicionar Palavra</button>
    <div id="addStatus"></div>
  </div>

  <div id="hint"></div>
  <canvas id="hangmanCanvas" width="200" height="250"></canvas>

  <div id="wordDisplay"></div>
  <div id="letters"></div>

  <div id="status"></div>
  <button id="restartBtn">Jogar Novamente</button>

  <script>
    // Lista inicial de palavras com dicas
    let words = [
      { word: 'JAVASCRIPT', hint: 'Linguagem de programaÃ§Ã£o para web' },
      { word: 'HTML',       hint: 'Linguagem de marcaÃ§Ã£o de pÃ¡ginas' },
      { word: 'CSS',        hint: 'Linguagem de estilo para pÃ¡ginas' },
      { word: 'PROGRAMACAO',hint: 'Ato de escrever cÃ³digo para resolver problemas' },
      { word: 'DESAFIO',    hint: 'Algo que testa suas habilidades' }
    ];

    let chosenWord, chosenHint, guessedLetters, wrongAttempts;
    const canvas     = document.getElementById('hangmanCanvas');
    const ctx        = canvas.getContext('2d');
    const restartBtn = document.getElementById('restartBtn');

    // Inicializa ou reinicia o jogo
    function init() {
      const idx = Math.floor(Math.random() * words.length);
      chosenWord     = words[idx].word;
      chosenHint     = words[idx].hint;
      guessedLetters = [];
      wrongAttempts  = 0;

      document.getElementById('status').textContent = '';
      document.getElementById('hint').textContent   = 'Dica: ' + chosenHint;
      restartBtn.style.display = 'none';

      drawGallows();
      renderWord();
      renderLetters();
    }

    // Desenha a forca e o boneco conforme nÃºmero de erros
    function drawGallows() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.lineWidth = 2;

      // Estrutura fixa da forca
      ctx.beginPath(); ctx.moveTo(10,240);  ctx.lineTo(190,240); ctx.stroke();
      ctx.beginPath(); ctx.moveTo(50,240);  ctx.lineTo(50,20);   ctx.stroke();
      ctx.beginPath(); ctx.moveTo(50,20);   ctx.lineTo(140,20);  ctx.stroke();
      ctx.beginPath(); ctx.moveTo(140,20);  ctx.lineTo(140,50);  ctx.stroke();

      // Partes do boneco
      if (wrongAttempts >= 1) {
        ctx.beginPath(); ctx.arc(140,75,25,0,Math.PI*2); ctx.stroke(); // cabeÃ§a
      }
      if (wrongAttempts >= 2) {
        ctx.beginPath(); ctx.moveTo(140,100); ctx.lineTo(140,160); ctx.stroke(); // tronco
      }
      if (wrongAttempts >= 3) {
        ctx.beginPath(); ctx.moveTo(140,120); ctx.lineTo(110,150); ctx.stroke(); // braÃ§o E
      }
      if (wrongAttempts >= 4) {
        ctx.beginPath(); ctx.moveTo(140,120); ctx.lineTo(170,150); ctx.stroke(); // braÃ§o D
      }
      if (wrongAttempts >= 5) {
        ctx.beginPath(); ctx.moveTo(140,160); ctx.lineTo(110,200); ctx.stroke(); // perna E
      }
      if (wrongAttempts >= 6) {
        ctx.beginPath(); ctx.moveTo(140,160); ctx.lineTo(170,200); ctx.stroke(); // perna D
      }
    }

    // Exibe palavra com '_' e letras corretas
    function renderWord() {
      const display = chosenWord
        .split('')
        .map(l => guessedLetters.includes(l) ? l : '_')
        .join(' ');
      document.getElementById('wordDisplay').textContent = display;
    }

    // Gera botÃµes Aâ€“Z
    function renderLetters() {
      const container = document.getElementById('letters');
      container.innerHTML = '';

      for (let i = 65; i <= 90; i++) {
        const letter = String.fromCharCode(i);
        const btn    = document.createElement('button');

        btn.textContent = letter;
        btn.disabled   = guessedLetters.includes(letter) || wrongAttempts >= 6;
        btn.addEventListener('click', () => handleGuess(letter, btn));

        container.appendChild(btn);
      }
    }

    // Trata palpites
    function handleGuess(letter, btn) {
      btn.disabled = true;
      if (chosenWord.includes(letter)) {
        guessedLetters.push(letter);
      } else {
        wrongAttempts++;
      }
      updateGame();
    }

    // Atualiza canvas, palavra e verifica fim
    function updateGame() {
      drawGallows();
      renderWord();
      renderLetters();
      checkEnd();
    }

    // Verifica vitÃ³ria ou derrota
    function checkEnd() {
      const won = chosenWord.split('').every(l => guessedLetters.includes(l));
      if (won) {
        document.getElementById('status').textContent = 'VocÃª venceu! ðŸŽ‰';
        endGame();
      } else if (wrongAttempts >= 6) {
        document.getElementById('status').textContent =
          'VocÃª perdeu. A palavra era: ' + chosenWord;
        endGame();
      }
    }

    // Bloqueia botÃµes e mostra reinÃ­cio
    function endGame() {
      document.querySelectorAll('#letters button')
        .forEach(b => b.disabled = true);
      restartBtn.style.display = 'inline-block';
    }

    restartBtn.addEventListener('click', init);

    // Adiciona nova palavra+hint ao array
    document.getElementById('addWordBtn').addEventListener('click', () => {
      const wInput = document.getElementById('newWord');
      const hInput = document.getElementById('newHint');
      const status = document.getElementById('addStatus');
      const w = wInput.value.trim().toUpperCase();
      const h = hInput.value.trim();

      if (!/^[A-Z]+$/.test(w)) {
        status.textContent = 'Palavra invÃ¡lida! Use apenas letras Aâ€“Z.';
        status.style.color = 'red';
        return;
      }
      if (!h) {
        status.textContent = 'Digite uma dica.';
        status.style.color = 'red';
        return;
      }

      words.push({ word: w, hint: h });
      wInput.value = '';
      hInput.value = '';
      status.textContent = 'Nova pergunta adicionada!';
      status.style.color = 'green';
    });

    // ComeÃ§a o jogo ao carregar
    init();
  </script>
</body>
</html>
